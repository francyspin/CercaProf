<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <title>Orario Scolastico ITT</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h1>Orario Scolastico ITTVT</h1>
    <div id="orologio-dinamico"></div>
    <div class="form-group-wrapper">
        <div class="form-group-principale">
            <button onclick="cercaAdesso()" class="btn-adesso">
                ðŸš€ Vedi Lezioni Attive (Adesso)
            </button>
            <button onclick="resetFiltri()" class="btn-reset">
                Annulla Filtri
            </button>
        </div>

        <!-- Pulsante modalitaÌ€ scura -->
        <button id="darkModeToggle" class="dark-mode-btn" aria-pressed="false"
            title="Attiva/disattiva modalitÃ  scura">ðŸŒ™ ModalitÃ  Scura</button>


        <div class="form-group-filtri">
            <select id="classe_select">
                <option value="">Filtra per Classe...</option>
            </select>
            <select id="docente_select">
                <option value="">Filtra per Docente...</option>
            </select>
            <select id="aula_select">
                <option value="">Filtra per Aula...</option>
            </select>

            <select id="giorno_select">
                <option value="">Qualsiasi Giorno</option>
                <option value="Lun">LunedÃ¬</option>
                <option value="Mar">MartedÃ¬</option>
                <option value="Mer">MercoledÃ¬</option>
                <option value="Gio">GiovedÃ¬</option>
                <option value="Ven">VenerdÃ¬</option>
            </select>
            <select id="ora_select">
                <option value="">Qualsiasi Ora</option>
                <option value="1">1Âª ora</option>
                <option value="2">2Âª ora</option>
                <option value="3">3Âª ora</option>
                <option value="4">4Âª ora</option>
                <option value="5">5Âª ora</option>
                <option value="6">6Âª ora</option>
                <option value="7">7Âª ora</option>
            </select>
        </div>
    </div>

    <!-- Banner benvenuto fuori dal box -->
    <div id="banner-benvenuto"></div>

    <!-- Banner frasi cicliche sotto il benvenuto -->
    <div id="banner-frasi"></div>

    <!-- Il box dei risultati/tabella -->
    <div id="risultati"></div>

    <script src="script.js"></script>
</body>
<script>
(function(){
  // crea bottone se manca
  function ensureButton() {
    let btn = document.getElementById('darkModeToggle');
    if (!btn) {
      btn = document.createElement('button');
      btn.id = 'darkModeToggle';
      btn.className = 'dark-mode-btn';
      btn.title = 'Attiva/disattiva modalitÃ  scura';
      btn.innerText = 'ðŸŒ™ ModalitÃ  Scura';
      document.body.appendChild(btn);
    }
    return btn;
  }

  function setDarkMode(on, save=true) {
    if (on) {
      document.body.classList.add('dark-mode');
    } else {
      document.body.classList.remove('dark-mode');
    }
    // aria-pressed + testo bottone
    const btn = document.getElementById('darkModeToggle');
    if (btn) {
      btn.setAttribute('aria-pressed', on ? 'true' : 'false');
      btn.innerText = on ? 'â˜€ï¸ ModalitÃ  Chiara' : 'ðŸŒ™ ModalitÃ  Scura';
    }
    if (save) localStorage.setItem('itt_dark_mode', on ? '1' : '0');
  }
  
  // all'avvio, applica preferenza salvata (se presente)
  document.addEventListener('DOMContentLoaded', function(){
    const btn = ensureButton();

    // leggi preferenza salvata o preferenza sistema
    const saved = localStorage.getItem('itt_dark_mode');
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (saved === '1') {
      setDarkMode(true, false);
    } else if (saved === '0') {
      setDarkMode(false, false);
    } else {
      // nessuna preferenza salvata -> segui sistema
      setDarkMode(prefersDark, false);
    }

    btn.addEventListener('click', function(){
      const isOn = document.body.classList.contains('dark-mode');
      setDarkMode(!isOn, true);
    });
  });
})();
</script>

</html>