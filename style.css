body {
  margin-top: -20px;
  padding: 30px;
  min-height: 100vh;
  box-sizing: border-box;
  font-family: 'Segoe UI', Arial, sans-serif;
  background: linear-gradient(120deg, #c4e3ff 0%, #e5ecfa 25%, #b8c8fe 100%);
  animation: bgMove 14s linear infinite;
  text-align: center;
  transition: background 0.5s;
}

@keyframes bgMove {
  0% {
    background-position: 0% 50%;
  }

  80% {
    background-position: 80% 51%;
  }

  100% {
    background-position: 0% 50%;
  }
}

body.senza-lezioni {
  background: #ffeaea;
}

h1 {
  color: #fff;
  background: linear-gradient(94deg, #1976D2 10%, #4fc3f7 90%);
  display: inline-block;
  padding: 26px 60px;
  border-radius: 32px;
  font-size: 2.7em;
  font-weight: 900;
  letter-spacing: 2px;
  box-shadow: 0 10px 38px #cadcff66, 0 1px 2px #fff9;
  text-shadow: 0 2px 16px #22507644, 0 4px 28px #4fc3f777;
  user-select: none;
  transition: background 0.6s;
  white-space: nowrap;
  margin: 0 auto 22px auto;
}

/* --- GRUPPI FORM --- */
.form-group-wrapper {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin-bottom: 24px;
  align-items: center;
}

.form-group-principale {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
  width: 100%;
  max-width: 650px;
}

.form-group-filtri {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 16px;
  width: 100%;
  max-width: 1080px;
  padding: 16px;
  background: rgba(255, 255, 255, 0.5);
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}

.form-group-filtri select {
  appearance: none;
  padding: 10px 32px 10px 12px;
  flex-grow: 1;
  flex-basis: 180px;
  min-width: 150px;
  max-width: 230px;
  margin: 0;
  border: 2px solid #b3b3de;
  border-radius: 10px;
  background: #f9fcff;
  font-size: 17px;
  cursor: pointer;
  transition: border 0.2s, box-shadow 0.2s;
  background-image: url("data:image/svg+xml;utf8,<svg fill='grey' viewBox='0 0 24 24' width='24' height='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/></svg>");
  background-repeat: no-repeat;
  background-position: right 14px center;
  background-size: 18px;
  padding-right: 32px;
}

.form-group-filtri select:focus {
  border-color: #1976D2;
  background: #f0faff;
  box-shadow: 0 0 8px #b7eafc;
}

.btn-adesso {
  padding: 14px 28px;
  font-size: 1.15em;
  color: #fff;
  background: #2196f3;
  border: none;
  border-radius: 12px;
  box-shadow: 0 4px 14px #b2daf7;
  cursor: pointer;
  font-weight: 700;
  transition: all 0.2s;
  flex-grow: 1;
}

.btn-adesso:hover {
  background: #1a78c2;
  box-shadow: 0 2px 10px #b2daf7;
  transform: translateY(-1px);
}

.btn-reset {
  padding: 14px 24px;
  font-size: 1.1em;
  color: #d32f2f;
  background: #fff2f2;
  border: 2px solid #ffcdd2;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.2s;
  flex-basis: 180px;
}

.btn-reset:hover {
  background: #ffebee;
  border-color: #ef9a9a;
}

.form-group {
  display: none;
}

/* =========== SEZIONE RISULTATI ORDINATA =========== */
#risultati {
  width: 100%;
  max-width: 1080px;
  margin: 32px auto 0 auto;
  padding: 0 10px;
  box-sizing: border-box;
  transition: opacity 0.4s ease-out;
  opacity: 1;
}

.risultati-nascosti {
  opacity: 0;
}

#risultati>.banner-lezioni,
#risultati>.benvenuto {
  margin-left: auto;
  margin-right: auto;
}

/* Contenitore per tabella + paginazione */
.tabella-e-pagine {
  width: 100%;
}

/* PAGINAZIONE */
.paginazione {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 8px 10px;
  margin-bottom: 18px;
}

.btn-pagi {
  padding: 10px 18px;
  border-radius: 13px;
  background: #e5eaf7;
  border: 2px solid #e0eaff;
  color: #2186eb;
  font-size: 1.1em;
  font-weight: 800;
  cursor: pointer;
  min-width: 44px;
  box-shadow: 0 1px 2px #e8f2fc;
  transition: background 0.13s, color 0.13s, border 0.13s;
}

.btn-pagi:hover,
.btn-pagi:focus {
  background: #e0f2ff;
  color: #14449a;
  border: 2px solid #63b4fd;
}

.btn-pagi.active {
  background: #2186eb !important;
  color: #fff !important;
  border-color: #1976d2 !important;
}

/* Contenitore tabella scorrevole */
.contenitore-tabella {
  max-width: 1000px;
  width: auto;
  margin-left: auto;
  margin-right: auto;
  background: #fff;
  border-radius: 14px;
  border: 2px solid #e0eaff;
  box-shadow: 0 1px 12px #e4f3fc;
  margin-bottom: 24px;
  overflow-x: auto;
}
/* === STILE SPECIFICO PER MODALITÀ "ADESSO" === */

/* Base (Mobile): La tabella si adatta al contenuto stretto */
.contenitore-tabella.mode-adesso {
    width: fit-content;
    margin: 0 auto;
    display: table; /* Aiuta a centrare fit-content */
}

/* Desktop/Tablet (Schermi > 768px): Miglioriamo la leggibilità */
@media (min-width: 768px) {
    .contenitore-tabella.mode-adesso {
        /* Impostiamo una larghezza minima per non farla sembrare "povera" su schermi grandi */
        min-width: 500px; 
        /* Manteniamo comunque un limite per non avere lo spazio bianco gigante */
        max-width: 800px; 
    }

    /* Aumentiamo il padding delle celle SOLO in questa modalità per renderla più ariosa */
    .contenitore-tabella.mode-adesso .orario-tabella th,
    .contenitore-tabella.mode-adesso .orario-tabella td {
        padding: 16px 30px; /* Più spazio laterale = più leggibile */
        font-size: 1.1em;   /* Testo leggermente più grande */
    }
}

/* TABELLONE */
.orario-tabella {
    width: 100%; 
    border-collapse: collapse;
    table-layout: fixed; /* <--- QUESTO È IL SEGRETO: Forza larghezze stabili */
}

.orario-tabella th,
.orario-tabella td {
    padding: 12px 10px; /* Un po' di respiro */
    word-wrap: break-word; /* Se il testo è lunghissimo, va a capo invece di rompere la tabella */
    vertical-align: middle; /* Testo centrato verticalmente */
}

.orario-tabella th {
    width: 10%; 
}

.orario-tabella th {
  background: #e7f3ff;
  color: #257fe2;
  font-weight: 900;
  letter-spacing: 1.6px;
  font-size: 1.15em;
  border-bottom: 2.4px solid #b0d9fd;
}

.orario-tabella td:last-child {
  width: 45%;
  /* L'ultima colonna si prende tutto lo spazio extra se necessario */
}
.orario-tabella th:nth-last-child(2) {
    width: 25%;
}


/* RISULTATI ITEM */
.result-item {
  background: #fff;
  padding: 17px;
  margin-bottom: 16px;
  border-radius: 15px;
  border: 1px solid #dde8f4;
  box-shadow: 0 2px 16px #e7ecf5;
  text-align: left;
}

.result-item b {
  color: #114bbe;
}

/* --- BANNER --- */
.benvenuto {
  max-width: 430px;
  margin: 40px auto;
  background: rgba(255, 255, 255, 0.92);
  border-radius: 15px;
  box-shadow: 0 1px 17px #cce7fd66;
  padding: 24px 16px;
  text-align: center;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  min-height: 120px;
  backdrop-filter: blur(2px);
  filter: drop-shadow(0 0 24px #8cc7fecc);
  animation: fadeIn 0.5s;
}

.benvenuto h2 {
  color: #1976D2;
  margin-bottom: 7px;
  font-size: 1.35em;
  font-weight: 700;
  letter-spacing: 1px;
  text-shadow: 0 1px 12px #7fbcfb55;
}

.benvenuto p {
  font-size: 1.03em;
  color: #286085;
  margin-bottom: 0;
  margin-top: 3px;
}

.banner-lezioni {
  max-width: 600px;
  margin: 24px auto 22px auto;
  background: #fff2f4;
  border-radius: 22px;
  border: 2.4px solid #ffb8b8;
  box-shadow: 0 1px 22px #f4c1c1, 0 0 44px #ffcfd9aa;
  padding: 36px 6vw 24px 6vw;
  text-align: center;
  position: relative;
  animation: fadeIn 0.6s;
  backdrop-filter: blur(2px);
}

.banner-lezioni::before {
  content: none !important;
}

.banner-lezioni .icona-banner {
  font-size: 3em;
  width: 100%;
  text-align: center;
  margin-bottom: 13px;
  filter: drop-shadow(0 3px 8px #ffc5c5);
  opacity: 0.97;
  display: block;
}

.banner-lezioni h2 {
  color: #e6255e;
  font-size: 2.1em;
  font-weight: 900;
  letter-spacing: 1.5px;
  margin-bottom: 16px;
  margin-top: 0;
  text-align: center;
}

.banner-lezioni p {
  color: #a13450;
  font-size: 1.15em;
  margin-bottom: 0;
  font-weight: 500;
}

/* Fade in */
@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

/* BANNER BENVEUTO GRADIENTE */
#banner-benvenuto {
  width: 100%;
  max-width: 470px;
  margin: 25px auto 6px auto;
  padding: 28px 12vw 22px 12vw;
  text-align: center;
  border-radius: 24px;
  background: linear-gradient(115deg, #eaf6ff 0%, #bcf1fa 48%, #f8e2f2 100%);
  color: #035ba6;
  font-size: 2.1em;
  font-weight: 800;
  letter-spacing: 2px;
  box-shadow: 0 11px 28px #d7edff66, 0 1px 4px #fff9;
  text-shadow: 0 2px 10px #22507633, 0 2px 16px #8ad3fc55;
  filter: drop-shadow(0 0 22px #8dcafb99);
  user-select: none;
  z-index: 2;
  background-size: 200% 200%;
  animation: benvenutoGradient 12s ease-in-out infinite;
}

@keyframes benvenutoGradient {
  0% {
    background-position: 0% 50%;
  }

  30% {
    background-position: 100% 50%;
  }

  60% {
    background-position: 60% 0%;
  }

  100% {
    background-position: 0% 50%;
  }
}

#banner-frasi {
  max-width: 410px;
  margin: 3px auto 12px auto;
  padding: 11px 14px;
  background: rgba(255, 255, 255, 0.75);
  color: #2676d9;
  font-size: 1.09em;
  border-radius: 16px;
  box-shadow: 0 2px 10px #bfe2ff33;
  display: flex;
  flex-direction: column;
  align-items: center;
  font-weight: 500;
  animation: fadeIn 1.2s;
}

#banner-frasi .frase-ciclica {
  transition: opacity 0.5s;
}

/* --- STILI TABELLA GRIGLIA ORARIO (NUOVO) --- */
.contenitore-tabella.griglia-settimanale {
  transition: width 0.3s;
  padding: 0;
}
.orario-tabella[style*="width: auto"] th, 
.orario-tabella[style*="width: auto"] td {
    padding: 10px 15px; /* Un po' meno padding laterale */
    white-space: nowrap; /* Evita che il testo vada a capo creando spazi strani */
}
.orario-griglia {
  width: 100%;
  border-collapse: collapse;
  background: #fff;
}

.orario-griglia th,
.orario-griglia td {
  border: 1px solid #e0eaff;
  padding: 8px 5px;
  text-align: center;
  font-weight: 500;
}

.orario-griglia th {
  background: #e7f3ff;
  color: #257fe2;
  font-size: 1em;
  font-weight: 700;
  text-transform: uppercase;
}

.orario-griglia .ora-header {
  background: #f0f4ff;
  font-weight: 800;
  color: #0b4c8c;
  width: 60px;
}

.orario-griglia .lezione-attiva {
  background: #fffafa;
  position: relative;
}

.orario-griglia .libero {
  background: #f7fff7;
  color: #92bfa2;
  font-style: italic;
  font-size: 0.9em;
}

.orario-griglia .cella-lezione {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 2px 0;
  min-height: 45px;
}

.orario-griglia .cella-lezione span {
  font-weight: 700;
  color: #1a76d2;
  line-height: 1.2;
}

.orario-griglia .cella-lezione small {
  font-size: 0.8em;
  color: #777;
  display: block;
  margin-top: 2px;
}

.cella-lezione {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 6px;
  line-height: 1.3em;
}

.riga-materia {
  font-weight: 600;
  font-size: 1em;
  margin-bottom: 2px;
}

.riga-docente {
  font-size: 0.9em;
  color: #1a3d6b;
}

.riga-aula {
  font-size: 0.8em;
  color: #555;
  opacity: 0.85;
}

.orario-tabella,
.orario-griglia {
  overflow-x: auto;
  display: block;
}

/* ============================================ */
/* RESPONSIVE MOBILE - VERSIONE CORRETTA       */
/* ============================================ */
@media (max-width: 600px) {

  /* LAYOUT GENERALE - Flexbox per riordinare */
  body {
    padding: 12px 8px;
    font-size: 0.95em;
    display: flex;
    flex-direction: column;
  }

  /* RIORDINO ELEMENTI SU MOBILE */
  h1 {
    order: 1;
  }

  #orologio-dinamico {
    order: 2;
  }

  #banner-benvenuto {
    order: 3;
  }

  #banner-frasi {
    order: 4;
  }

  .form-group-wrapper {
    order: 5;
  }

  #risultati {
    order: 6;
  }

  /* TITOLO PRINCIPALE - rimane dentro, più piccolo */
  h1 {
    font-size: 1.4em;
    padding: 12px 16px;
    max-width: calc(100vw - 20px);
    border-radius: 12px;
    margin: 8px auto 16px auto;
    letter-spacing: 0.5px;
    word-wrap: break-word;
    white-space: normal;
  }

  /* FORM E CONTROLLI */
  .form-group-wrapper {
    gap: 10px;
    margin-bottom: 12px;
    width: 100%;
    padding: 0 4px;
  }

  .form-group-principale {
    flex-direction: column;
    gap: 8px;
    max-width: 100%;
    padding: 0;
  }

  /* BOTTONI PRINCIPALI - PICCOLI */
  .btn-adesso,
  .btn-reset,
  button.btn-reset,
  .form-group-principale button {
    width: 100% !important;
    font-size: 14px !important;
    line-height: 1.2 !important;
    padding: 10px 12px !important;
    margin-bottom: 6px !important;
    border-radius: 8px !important;
    min-height: 42px !important;
    max-height: 44px !important;
    height: 42px !important;
    box-sizing: border-box !important;
  }

  /* FILTRI SELECT - MOLTO PIÙ PICCOLI */
  .form-group-filtri {
    flex-direction: column !important;
    align-items: stretch !important;
    gap: 10px !important;
    width: calc(100% - 16px) !important;
    padding: 12px 8px !important;
    margin: 0 auto !important;
    border-radius: 10px !important;
  }

  .form-group-filtri select {
    width: 100% !important;
    min-width: 0 !important;
    max-width: 100% !important;
    font-size: 14px !important;
    line-height: 1.3 !important;
    padding: 10px 32px 10px 12px !important;
    margin-bottom: 0 !important;
    border-radius: 8px !important;
    height: 42px !important;
    max-height: 42px !important;
    box-sizing: border-box !important;
    background-size: 16px !important;
    background-position: right 10px center !important;
  }

  /* RISULTATI E TABELLE */
  #risultati {
    max-width: 100%;
    width: 100%;
    margin: 16px auto 0 auto !important;
    padding: 0 4px;
  }

  .tabella-e-pagine {
    max-width: 100%;
    width: 100%;
    padding: 0;
  }

  .contenitore-tabella {
    width: fit-content;
    /* IL PUNTO CHIAVE: Il box si restringe al contenuto */
    min-width: 300px;
    /* Una larghezza minima di sicurezza */
    max-width: 95%;
    /* Non superare mai la larghezza dello schermo */
    margin-left: auto;
    margin-right: auto;
    background: #fff;
    border-radius: 14px;
    border: 2px solid #e0eaff;
    box-shadow: 0 1px 12px #e4f3fc;
    margin-bottom: 24px;
    overflow-x: hidden;
    /* Nasconde scrollbar orizzontale */
  }

  /* TABELLA ORARIO */
  .orario-tabella {
    width: 100%;
    /* La tabella riempie tutto lo spazio del contenitore ristretto */
    margin: 0 auto;
  }

  .orario-tabella th,
  .orario-tabella td {
    font-size: 0.9em;
    padding: 8px 6px;
    min-width: 60px;
  }

  /* PAGINAZIONE - bottoni più piccoli */
  .paginazione {
    gap: 6px 4px;
    max-width: 100%;
    padding: 0 4px;
    margin-bottom: 12px;
  }

  .btn-pagi,
  button.btn-pagi {
    min-width: 32px !important;
    max-width: 44px !important;
    min-height: 32px !important;
    max-height: 38px !important;
    font-size: 0.8em !important;
    padding: 6px 10px !important;
    border-radius: 8px !important;
    font-weight: 700 !important;
  }

  /* BANNER E MESSAGGI - tutto dentro i contenitori */
  .banner-lezioni {
    padding: 16px 16px 14px 16px !important;
    max-width: calc(100% - 8px) !important;
    margin: 12px auto 12px auto !important;
    border-radius: 12px !important;
  }

  .banner-lezioni h2 {
    font-size: 1.4em !important;
    letter-spacing: 0.5px !important;
    word-wrap: break-word;
    margin-bottom: 10px;
  }

  .banner-lezioni p {
    font-size: 0.95em !important;
  }

  .banner-lezioni .icona-banner {
    font-size: 2em !important;
    margin-bottom: 8px;
  }

  .benvenuto {
    padding: 16px 12px !important;
    max-width: calc(100% - 8px) !important;
    margin: 12px auto !important;
    border-radius: 12px !important;
    min-height: auto;
  }

  .benvenuto h2 {
    font-size: 1.2em !important;
    letter-spacing: 0.5px !important;
    margin-bottom: 8px;
  }

  .benvenuto p {
    font-size: 0.95em !important;
  }

  #banner-benvenuto {
    padding: 14px 16px !important;
    max-width: calc(100% - 8px) !important;
    font-size: 1.15em !important;
    border-radius: 12px !important;
    margin: 8px auto 8px auto !important;
    letter-spacing: 0.5px !important;
    word-wrap: break-word;
    line-height: 1.3 !important;
  }

  #banner-frasi {
    padding: 10px 12px !important;
    max-width: calc(100% - 8px) !important;
    font-size: 0.9em !important;
    border-radius: 10px !important;
    margin: 6px auto 12px auto !important;
    line-height: 1.4 !important;
  }

  /* GRIGLIA ORARIA */
  .orario-griglia {
    font-size: 0.85em;
  }

  .orario-griglia th,
  .orario-griglia td {
    padding: 6px 3px;
    font-size: 0.85em;
    min-width: 45px;
  }

  .orario-griglia .ora-header {
    width: 40px;
    font-size: 0.8em;
    padding: 6px 2px;
  }

  .riga-materia {
    font-size: 0.9em;
  }

  .riga-docente {
    font-size: 0.8em;
  }

  .riga-aula {
    font-size: 0.75em;
  }

  .slot-libero {
    font-size: 0.75em !important;
  }

  .cella-lezione {
    padding: 4px 2px;
    min-height: 35px;
  }

  /* RESULT ITEM */
  .result-item {
    padding: 12px;
    margin-bottom: 10px;
    font-size: 0.9em;
  }
}

/* TABLET - media query aggiuntiva per dispositivi medi */
@media (min-width: 601px) and (max-width: 900px) {
  h1 {
    font-size: 2em;
    padding: 18px 40px;
  }

  .orario-griglia th,
  .orario-griglia td {
    padding: 6px 4px;
    font-size: 0.9em;
  }

  .orario-griglia .ora-header {
    width: 50px;
  }
}